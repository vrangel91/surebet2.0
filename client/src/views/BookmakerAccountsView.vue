<template>
  <RouteGuard :requiresVIP="true">
    <div class="accounts-container">
    <!-- Sidebar Reutilizável -->
    <Sidebar 
      :sidebarCollapsed="sidebarCollapsed"
      @toggle-sidebar="handleSidebarToggle"
      @sidebar-state-loaded="handleSidebarStateLoaded"
      @open-glossary="openGlossary"
    />

    <!-- Conteúdo Principal -->
    <main class="main-content">
      <!-- Header Global -->
      <Header />
      
      <header class="content-header">
        <div class="header-left">
          <h2 class="page-title">
            <svg class="accounts-icon" width="36" height="36" fill="currentColor" viewBox="0 0 16 16">
              <path d="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4zm2-1a1 1 0 0 0-1 1v.217l7 4.2 7-4.2V4a1 1 0 0 0-1-1H2zm13 2.383l-4.708 2.825L15 11.105V5.383zm-.034 6.876l-5.64-3.471L8 9.583l-1.326-.795-5.64 3.47A1 1 0 0 0 2 13h12a1 1 0 0 0 .966-.741zM1 11.105l4.708-2.897L1 5.383v5.722z"/>
            </svg>
            Gerenciamento de Contas
          </h2>
          <p class="page-subtitle">Gerencie suas contas de casas de apostas e saldos</p>
        </div>
        
        <!-- Botão Adicionar Conta -->
        <div class="header-actions">
          <button @click="showAddModal = true" class="add-account-btn">
            <svg width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
              <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/>
            </svg>
            Adicionar Conta
          </button>
        </div>
      </header>



      <!-- Estatísticas Gerais -->
      <div class="stats-section">
        <div class="stat-card">
          <span class="stat-number">{{ accounts.length }}</span>
          <span class="stat-label">Total de Contas</span>
        </div>
        <div class="stat-card">
          <span class="stat-number">{{ formatCurrency(totalBalance) }}</span>
          <span class="stat-label">Saldo Total</span>
        </div>
        <div class="stat-card">
          <span class="stat-number">{{ activeAccounts }}</span>
          <span class="stat-label">Contas Ativas</span>
        </div>
        <div class="stat-card">
          <span class="stat-number">{{ formatCurrency(totalTransactions) }}</span>
          <span class="stat-label">Total Transações</span>
        </div>
      </div>

      <!-- Lista de Contas -->
      <div class="accounts-section">
        <h3>Suas Contas</h3>
        
        <!-- Indicador de carregamento -->
        <div v-if="isLoading" class="loading-indicator">
          <div class="loading-spinner">⏳</div>
          <span>Carregando contas...</span>
        </div>
        
        <div v-else-if="accounts.length === 0" class="no-accounts">
          <p>Nenhuma conta encontrada. Clique em "Adicionar Conta" para começar.</p>
        </div>
        
        <div v-else class="accounts-grid">
          <div 
            v-for="account in accounts" 
            :key="account.id" 
            class="account-card"
            :class="{ inactive: account.status !== 'active' }"
          >
            <div class="account-header">
              <div class="account-info">
                <h4 class="account-name">{{ account.bookmaker_name }}</h4>
                <span class="account-status" :class="account.status">
                  {{ getStatusText(account.status) }}
                </span>
              </div>
              <div class="account-actions">
                <button @click="editAccount(account)" class="action-btn edit" title="Editar conta">
                  <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                    <path d="M12.854.146a.5.5 0 0 0-.707 0L10.5 1.793 14.207 5.5l1.647-1.646a.5.5 0 0 0 0-.708l-3-3zm.646 6.061L9.793 2.5 3.293 9H3.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.207l6.5-6.5zm-7.468 7.468A.5.5 0 0 1 6 13.5V13h-.5a.5.5 0 0 1-.5-.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.5-.5V10h-.5a.5.5 0 0 1-.5-.5V9h-.5a.5.5 0 0 1-.5-.5V8h-.5a.5.5 0 0 1-.5-.5V7h-.5a.5.5 0 0 1-.5-.5V6H1a.5.5 0 0 1-.5-.5V5H.5a.5.5 0 0 1-.5-.5V4H.5a.5.5 0 0 1-.5-.5V3H.5a.5.5 0 0 1-.5-.5V2H.5a.5.5 0 0 1-.5-.5V1H.5a.5.5 0 0 1-.5-.5H0v1h.5a.5.5 0 0 1 .5.5V2h.5a.5.5 0 0 1 .5.5V3h.5a.5.5 0 0 1 .5.5V4h.5a.5.5 0 0 1 .5.5V5h.5a.5.5 0 0 1 .5.5V6h.5a.5.5 0 0 1 .5.5V7h.5a.5.5 0 0 1 .5.5V8h.5a.5.5 0 0 1 .5.5V9h.5a.5.5 0 0 1 .5.5V10h.5a.5.5 0 0 1 .5.5V11h.5a.5.5 0 0 1 .5.5V12h.5a.5.5 0 0 1 .5.5V13h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1-.5.5H6v-.5a.5.5 0 0 1 .5-.5H7v-.5a.5.5 0 0 1 .5-.5H8v-.5a.5.5 0 0 1 .5-.5H9v-.5a.5.5 0 0 1 .5-.5h.5z"/>
                  </svg>
                </button>
                <button @click="deleteAccount(account)" class="action-btn delete" title="Excluir conta">
                  <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                    <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"/>
                    <path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"/>
                  </svg>
                </button>
              </div>
            </div>
            
                         <div class="account-balance">
               <span class="balance-label">Saldo:</span>
               <span class="balance-amount" :class="{ 'has-balance': parseFloat(account.balance) > 0 }">
                 {{ formatCurrency(account.balance) }}
               </span>
             </div>
            
            <div class="account-details">
              <div class="detail-item">
                <span class="detail-label">Moeda:</span>
                <span class="detail-value">{{ account.currency }}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">Criada em:</span>
                <span class="detail-value">{{ formatDate(account.created_at) }}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">Última atualização:</span>
                <span class="detail-value">{{ formatDate(account.last_updated) }}</span>
              </div>
            </div>
            
            <div class="account-notes" v-if="account.notes">
              <span class="notes-label">Observações:</span>
              <p class="notes-text">{{ account.notes }}</p>
            </div>
            
            <div class="account-transactions">
              <button @click="viewTransactions(account)" class="transactions-btn">
                Ver Transações
              </button>
              <button @click="openWithdrawModal(account)" class="withdraw-btn" :disabled="account.status !== 'active'">
                Saque
              </button>
              <button @click="addToReports(account)" class="add-reports-btn" :disabled="account.status !== 'active' || parseFloat(account.balance) <= 0">
                <svg width="14" height="14" fill="currentColor" viewBox="0 0 16 16">
                  <path d="M14.778.085A.5.5 0 0 1 15 .5V8a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1 0-1h1.5V1.5a.5.5 0 0 1 1 0V7H15a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5H.5a.5.5 0 0 1-.5-.5v-3a.5.5 0 0 1 .5-.5H1V1.5a.5.5 0 0 1 1 0V7h1.5a.5.5 0 0 1 0 1h-3A.5.5 0 0 1 0 8V.5a.5.5 0 0 1 .222-.415zM4.5 1a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1zM4 3.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1zM4.5 5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1zM9 1.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1zM9.5 3a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1zM9 5.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1zM9.5 7a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1zM9 9.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1z"/>
                </svg>
                Adicionar aos Relatórios
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Modal Adicionar/Editar Conta -->
      <div v-if="showAddModal || showEditModal" class="modal-overlay" @click="closeModal">
        <div class="modal-content" @click.stop>
          <div class="modal-header">
            <h3>{{ showEditModal ? 'Editar Conta' : 'Adicionar Nova Conta' }}</h3>
            <button @click="closeModal" class="close-btn">×</button>
          </div>
          
          <form class="modal-form">
            <div class="form-group">
              <label for="bookmaker_name">Casa de Apostas *</label>
              <select 
                id="bookmaker_name"
                v-model="formData.bookmaker_name"
                required
              >
                <option value="">Selecione uma casa de apostas</option>
                <option 
                  v-for="bookmaker in availableBookmakers" 
                  :key="bookmaker" 
                  :value="bookmaker"
                >
                  {{ bookmaker }}
                </option>
              </select>
            </div>
            
            <div class="form-group">
              <label for="balance">Saldo Inicial</label>
              <input 
                id="balance"
                v-model="formData.balance"
                type="number"
                step="0.01"
                min="0"
                placeholder="0.00"
                @input="handleBalanceInput"
              >
            </div>
            
            <div class="form-group">
              <label for="currency">Moeda</label>
              <select id="currency" v-model="formData.currency">
                <option value="BRL">Real (BRL)</option>
                <option value="USD">Dólar (USD)</option>
                <option value="EUR">Euro (EUR)</option>
              </select>
            </div>
            
            <div class="form-group">
              <label for="notes">Observações</label>
              <textarea 
                id="notes"
                v-model="formData.notes"
                rows="3"
                placeholder="Observações sobre a conta..."
              ></textarea>
            </div>
            
            <div class="form-group" v-if="showEditModal">
              <label for="status">Status</label>
              <select id="status" v-model="formData.status">
                <option value="active">Ativa</option>
                <option value="inactive">Inativa</option>
                <option value="suspended">Suspensa</option>
              </select>
            </div>
            
            <div class="modal-actions">
              <button type="button" @click="closeModal" class="cancel-btn">Cancelar</button>
              <button type="button" class="save-btn" :disabled="isLoading" @click="saveAccount">
                {{ isLoading ? 'Salvando...' : (showEditModal ? 'Atualizar' : 'Criar') }}
                <span v-if="isLoading" class="loading-spinner">⏳</span>
              </button>
            </div>
          </form>
        </div>
      </div>

      <!-- Modal de Saque -->
      <div v-if="showWithdrawModal" class="modal-overlay" @click="closeWithdrawModal">
        <div class="modal-content" @click.stop>
          <div class="modal-header">
            <h3>Saque - {{ selectedAccount?.bookmaker_name }}</h3>
            <button @click="closeWithdrawModal" class="close-btn">×</button>
          </div>
          
          <form @submit.prevent="processWithdraw" class="modal-form">
            <div class="form-group">
              <label for="withdraw_amount">Valor do Saque *</label>
              <input 
                id="withdraw_amount"
                v-model="withdrawData.amount"
                type="number"
                step="0.01"
                min="0.01"
                required
                placeholder="0.00"
                @input="handleWithdrawAmountInput"
              >
              <small class="form-help">Saldo disponível: {{ formatCurrency(selectedAccount?.balance || 0) }}</small>
            </div>
            
            <div class="form-group">
              <label for="withdraw_description">Descrição (opcional)</label>
              <textarea 
                id="withdraw_description"
                v-model="withdrawData.description"
                rows="2"
                placeholder="Descrição do saque..."
              ></textarea>
            </div>
            
            <div class="modal-actions">
              <button type="button" @click="closeWithdrawModal" class="cancel-btn">Cancelar</button>
              <button type="submit" class="withdraw-submit-btn" :disabled="isLoading">
                {{ isLoading ? 'Processando...' : 'Confirmar Saque' }}
              </button>
            </div>
          </form>
        </div>
      </div>

      <!-- Modal de Transações -->
      <div v-if="showTransactionsModal" class="modal-overlay" @click="closeTransactionsModal">
        <div class="modal-content large" @click.stop>
          <div class="modal-header">
            <h3>Histórico de Transações - {{ selectedAccount?.bookmaker_name }}</h3>
            <button @click="closeTransactionsModal" class="close-btn">×</button>
          </div>
          
          <div class="transactions-content">
            <div v-if="transactions.length === 0" class="no-transactions">
              <p>Nenhuma transação encontrada para esta conta.</p>
            </div>
            
            <div v-else class="transactions-list">
              <div 
                v-for="transaction in transactions" 
                :key="transaction.id"
                class="transaction-item"
                :class="transaction.transaction_type"
              >
                <div class="transaction-info">
                  <div class="transaction-type">
                    <span class="type-badge" :class="transaction.transaction_type">
                      {{ getTransactionTypeText(transaction.transaction_type) }}
                    </span>
                  </div>
                  <div class="transaction-amount">
                    <span class="amount" :class="transaction.transaction_type">
                      {{ transaction.transaction_type === 'withdrawal' ? '-' : '+' }}{{ formatCurrency(transaction.amount) }}
                    </span>
                  </div>
                </div>
                
                <div class="transaction-details">
                  <div class="transaction-description">
                    {{ transaction.description }}
                  </div>
                  <div class="transaction-date">
                    {{ formatDateTime(transaction.created_at) }}
                  </div>
                  <div class="transaction-balance">
                    Saldo após: {{ formatCurrency(transaction.balance_after) }}
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Modal de Confirmação de Exclusão -->
      <div v-if="showDeleteConfirmModal" class="modal-overlay" @click="closeDeleteConfirmModal">
        <div class="modal-content delete-confirm" @click.stop>
          <div class="modal-header delete-header">
            <div class="delete-icon">
              <svg width="32" height="32" fill="currentColor" viewBox="0 0 16 16">
                <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
              </svg>
            </div>
            <h3>Confirmar Exclusão de Conta</h3>
            <button @click="closeDeleteConfirmModal" class="close-btn">×</button>
          </div>
          
          <div class="delete-content">
            <div class="account-summary">
              <div class="account-info-row">
                <span class="info-label">Nome da Conta:</span>
                <span class="info-value">{{ accountToDelete?.bookmaker_name }}</span>
              </div>
              <div class="account-info-row">
                <span class="info-label">Saldo Atual:</span>
                <span class="info-value balance-value">{{ formatCurrency(accountToDelete?.balance) }}</span>
              </div>
              <div class="account-info-row">
                <span class="info-label">Status:</span>
                <span class="info-value status-value" :class="accountToDelete?.status">
                  {{ getStatusText(accountToDelete?.status) }}
                </span>
              </div>
              <div class="account-info-row">
                <span class="info-label">Criada em:</span>
                <span class="info-value">{{ formatDate(accountToDelete?.created_at) }}</span>
              </div>
            </div>

            <div v-if="deleteValidation.warnings.length > 0" class="delete-warnings">
              <h4>⚠️ Avisos Importantes:</h4>
              <ul class="warnings-list">
                <li v-for="warning in deleteValidation.warnings" :key="warning" class="warning-item">
                  {{ warning }}
                </li>
              </ul>
            </div>

                         <div class="delete-consequences">
               <h4>🔒 Esta ação irá:</h4>
                <ul class="consequences-list">
                  <li>Excluir permanentemente a conta</li>
                  <li>Excluir todo o histórico de transações</li>
                  <li>Perder o saldo disponível</li>
                  <li>Atualizar totalizadores da dashboard</li>
                  <li>Registrar log de auditoria</li>
                </ul>
              </div>

             <div class="delete-actions">
               <button @click="closeDeleteConfirmModal" class="cancel-delete-btn">
                 <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                   <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                   <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>
                 </svg>
                 Cancelar
               </button>
               <button @click="confirmDeleteAccount" class="confirm-delete-btn" :disabled="isLoading">
                 <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                   <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
                 </svg>
                 {{ isLoading ? 'Excluindo...' : 'Confirmar Exclusão' }}
                 <span v-if="isLoading" class="loading-spinner">⏳</span>
               </button>
             </div>
           </div>
         </div>
       </div>
    </main>

    <!-- Sistema de Notificações Toast -->
    <div class="toast-container">
      <div 
        v-for="toast in toasts" 
        :key="toast.id"
        :data-toast-id="toast.id"
        class="toast-notification"
        :class="toast.type"
      >
        <div class="toast-icon">
          <svg v-if="toast.type === 'success'" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
            <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.97a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
          </svg>
          <svg v-else-if="toast.type === 'error'" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
            <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4zm.002 6a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"/>
          </svg>
          <svg v-else-if="toast.type === 'warning'" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
            <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
          </svg>
          <svg v-else width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
            <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
            <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/>
          </svg>
        </div>
        <div class="toast-content">
          <div class="toast-title">{{ toast.title }}</div>
          <div class="toast-message">{{ toast.message }}</div>
        </div>
        <button @click="removeToast(toast.id)" class="toast-close">
          <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
            <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>
          </svg>
        </button>
        <div class="toast-progress" :style="{ width: `${toast.progress}%` }"></div>
      </div>
    </div>
  </div>
    </RouteGuard>
</template>

<script>
import { mapGetters } from 'vuex'
import Sidebar from '../components/Sidebar.vue'
import Header from '../components/Header.vue'
import RouteGuard from '../components/RouteGuard.vue'
import { http } from '../utils/http'
import { filterOptions } from '../config/filters.js'

export default {
  name: 'BookmakerAccountsView',
  components: {
    Sidebar,
    Header,
    RouteGuard
  },
  
  data() {
    return {
      sidebarCollapsed: false,
      accounts: [],
      isLoading: false,
      showAddModal: false,
      showEditModal: false,
      showWithdrawModal: false,
      showTransactionsModal: false,
      showDeleteConfirmModal: false,
      selectedAccount: null,
      accountToDelete: null,
      deleteValidation: {
        canDelete: true,
        reason: '',
        warnings: []
      },
      transactions: [],
      formData: {
        bookmaker_name: '',
        balance: '',
        currency: 'BRL',
        notes: '',
        status: 'active'
      },
      withdrawData: {
        amount: '',
        description: ''
      },
      toasts: [], // Array para armazenar as notificações
      // Lista de casas de apostas disponíveis
      availableBookmakers: filterOptions.houses
    }
  },
  
  computed: {
    ...mapGetters([
      'isAdmin',
      'canUseSystem'
    ]),
    
    currentUser() {
      return this.$store.getters.currentUser
    },
    

    
    totalBalance() {
      if (!Array.isArray(this.accounts)) return 0
      return this.accounts.reduce((total, account) => {
        return total + parseFloat(account.balance || 0)
      }, 0)
    },
    
    activeAccounts() {
      if (!Array.isArray(this.accounts)) return 0
      return this.accounts.filter(account => account.status === 'active').length
    },
    
    totalTransactions() {
      if (!Array.isArray(this.transactions)) return 0
      return this.transactions.reduce((total, transaction) => {
        return total + parseFloat(transaction.amount || 0)
      }, 0)
    }
  },
  
  async mounted() {
    this.loadAccounts()
  },
  
  methods: {
    handleSidebarToggle(collapsed) {
      this.sidebarCollapsed = collapsed
    },
    
    handleSidebarStateLoaded(collapsed) {
      this.sidebarCollapsed = collapsed
    },
    
    openGlossary() {
      // Implementar se necessário
    },
    
    async loadAccounts() {
      try {
        console.log('🔄 Carregando contas...')
        this.isLoading = true
        const response = await http.get('/api/bookmaker-accounts')
        console.log('📊 Resposta da API:', response)
        
        if (response && response.data) {
          // Garantir que accounts seja sempre um array
          let accountsData = []
          
          if (response.data.data && response.data.data.accounts) {
            // Estrutura: { data: { accounts: [...] } }
            accountsData = response.data.data.accounts
          } else if (response.data.data && Array.isArray(response.data.data)) {
            // Estrutura: { data: [...] }
            accountsData = response.data.data
          } else if (Array.isArray(response.data)) {
            // Estrutura: { data: [...] }
            accountsData = response.data
          } else if (response.data.accounts && Array.isArray(response.data.accounts)) {
            // Estrutura: { accounts: [...] }
            accountsData = response.data.accounts
          }
          
          this.accounts = Array.isArray(accountsData) ? accountsData : []
          console.log('✅ Contas carregadas:', this.accounts.length)
          console.log('📋 Lista de contas:', this.accounts)
          
          // Forçar atualização do Vue após carregar dados
          this.$nextTick(() => {
            this.$forceUpdate()
            console.log('🔄 Vue atualizado após carregar contas')
          })
        } else {
          this.accounts = []
          console.log('⚠️ Nenhuma conta encontrada')
        }
      } catch (error) {
        console.error('❌ Erro ao carregar contas:', error)
        this.showToast('Erro', 'Erro ao carregar contas', 'error')
        this.accounts = []
      } finally {
        this.isLoading = false
      }
    },
    
         editAccount(account) {
       console.log('✏️ Editando conta:', account)
       console.log('🖱️ Clique detectado no botão editar')
       
       // Verificar se conta pode ser editada
       if (account.status === 'suspended') {
         this.showToast('Aviso', 'Contas suspensas não podem ser editadas. Entre em contato com o suporte.', 'warning')
         return
       }
       
       this.selectedAccount = account
       this.formData = {
         bookmaker_name: account.bookmaker_name,
         balance: account.balance,
         currency: account.currency,
         notes: account.notes || '',
         status: account.status
       }
       
       // Verificar limitações de edição
       const warnings = []
       if (parseFloat(account.balance) > 0) {
         warnings.push('💰 Conta possui saldo - alterações limitadas')
       }
       
       if (warnings.length > 0) {
         console.log('⚠️ Avisos de edição:', warnings)
       }
       
       this.showEditModal = true
       console.log('📝 Dados do formulário:', this.formData)
       console.log('📊 Estado do modal - showEditModal:', this.showEditModal)
     },
    
         async deleteAccount(account) {
       console.log('🗑️ Tentando excluir conta:', account)
       console.log('🖱️ Clique detectado no botão excluir')
       
       // Validações pré-exclusão (apenas para mostrar avisos)
       const validationResult = await this.validateAccountForDeletion(account)
       this.deleteValidation = validationResult
       
       // Todas as contas podem ser excluídas (apenas avisos)
       // Abrir modal de confirmação
       this.accountToDelete = account
       this.showDeleteConfirmModal = true
       console.log('📋 Modal de confirmação aberto')
     },

    async confirmDeleteAccount() {
      if (!this.accountToDelete) return
      
      try {
        console.log('🔄 Iniciando exclusão...')
        this.isLoading = true
        
        const response = await http.delete(`/api/bookmaker-accounts/${this.accountToDelete.id}`)
        console.log('✅ Resposta da exclusão:', response)
        
        console.log('✅ Conta excluída com sucesso')
        this.showToast('Sucesso', 'Conta excluída com sucesso', 'success')
        
        // Registrar log de auditoria
        await this.logAuditAction('DELETE_ACCOUNT', this.accountToDelete.id, {
          account_name: this.accountToDelete.bookmaker_name,
          balance: this.accountToDelete.balance,
          status: this.accountToDelete.status
        })
        
        // Fechar modal
        this.closeDeleteConfirmModal()
        
        // Recarregar contas e atualizar dashboard
        console.log('🔄 Recarregando lista após exclusão...')
        await this.loadAccounts()
        this.updateDashboardTotals()
        console.log('✅ Lista e dashboard atualizados após exclusão')
        
        // Forçar atualização do Vue
        this.$forceUpdate()
        console.log('🔄 Forçando atualização do Vue')
        
        // Aguardar um pouco e forçar nova atualização
        setTimeout(async () => {
          console.log('🔄 Recarregando lista novamente...')
          await this.loadAccounts()
          this.updateDashboardTotals()
          this.$forceUpdate()
          console.log('🔄 Segunda atualização forçada do Vue')
        }, 200)
        
      } catch (error) {
        console.error('❌ Erro ao excluir conta:', error)
        this.showToast('Erro', error.response?.data?.message || 'Erro ao excluir conta', 'error')
      } finally {
        this.isLoading = false
      }
    },
    
    async saveAccount() {
      // Proteção contra cliques duplos
      if (this.isLoading) {
        console.log('⚠️ Operação já em andamento, ignorando clique')
        return
      }
      
      console.log('saveAccount chamado', this.formData)
      
      // Validação avançada
      const validation = this.validateAccountForEdit(this.formData, this.selectedAccount)
      if (!validation.isValid) {
        console.error('❌ Validação falhou:', validation.errors)
        this.showToast('Erro', `Erro de validação:\n\n${validation.errors.join('\n')}`, 'error')
        return
      }
      
      try {
        this.isLoading = true
        console.log('Enviando dados:', this.formData)
        
        // Preparar dados para envio
        const dataToSend = {
          ...this.formData,
          balance: this.formData.balance ? parseFloat(this.formData.balance) : 0.00
        }
        
        let response
        if (this.showEditModal) {
          console.log('🔄 Atualizando conta ID:', this.selectedAccount.id)
          console.log('📤 Dados para atualização:', dataToSend)
          response = await http.put(`/api/bookmaker-accounts/${this.selectedAccount.id}`, dataToSend)
          console.log('✅ Resposta da atualização:', response)
          console.log('✅ Conta atualizada com sucesso')
          this.showToast('Sucesso', 'Conta atualizada com sucesso', 'success')
          
          // Registrar log de auditoria
          await this.logAuditAction('UPDATE_ACCOUNT', this.selectedAccount.id, {
            account_name: this.formData.bookmaker_name,
            changes: this.getChangesSummary(this.selectedAccount, this.formData)
          })
        } else {
          console.log('🆕 Criando nova conta')
          console.log('📤 Dados para criação:', dataToSend)
          response = await http.post('/api/bookmaker-accounts', dataToSend)
          console.log('✅ Resposta da criação:', response)
          console.log('✅ Conta criada com sucesso')
          this.showToast('Sucesso', 'Conta criada com sucesso', 'success')
          
          // Registrar log de auditoria
          await this.logAuditAction('CREATE_ACCOUNT', response.data?.id, {
            account_name: this.formData.bookmaker_name,
            initial_balance: this.formData.balance,
            currency: this.formData.currency
          })
        }
        
        // Definir loading como false antes de fechar modal
        this.isLoading = false
        
        // Fechar modal após sucesso
        console.log('🎉 Sucesso! Fechando modal...')
        this.closeModal()
        
        // Recarregar contas imediatamente
        console.log('🔄 Recarregando contas...')
        await this.loadAccounts()
        console.log('✅ Processo concluído')
        
      } catch (error) {
        console.error('❌ Erro ao salvar conta:', error)
        this.showToast('Erro', error.response?.data?.message || 'Erro ao salvar conta', 'error')
        
        // Não reabrir modal automaticamente em caso de erro
        // O usuário pode tentar novamente se quiser
        console.log('⚠️ Modal não será reaberto automaticamente')
      } finally {
        this.isLoading = false
      }
    },
    
    async processWithdraw() {
      // Validação do valor do saque
      const withdrawAmount = parseFloat(this.withdrawData.amount)
      const availableBalance = parseFloat(this.selectedAccount?.balance || 0)
      
      if (!withdrawAmount || withdrawAmount <= 0) {
        this.showToast('Erro', 'Por favor, insira um valor válido para o saque', 'error')
        return
      }
      
      if (withdrawAmount > availableBalance) {
        this.showToast('Erro', `Valor do saque (${this.formatCurrency(withdrawAmount)}) excede o saldo disponível (${this.formatCurrency(availableBalance)})`, 'error')
        return
      }
      
      try {
        this.isLoading = true
        await http.post(`/api/bookmaker-accounts/${this.selectedAccount.id}/withdraw`, this.withdrawData)
        console.log('✅ Saque realizado com sucesso')
        this.showToast('Sucesso', `Saque de ${this.formatCurrency(withdrawAmount)} realizado com sucesso`, 'success')
        this.closeWithdrawModal()
        this.loadAccounts()
      } catch (error) {
        console.error('❌ Erro ao realizar saque:', error)
        this.showToast('Erro', error.response?.data?.message || 'Erro ao realizar saque', 'error')
      } finally {
        this.isLoading = false
      }
    },
    
    async viewTransactions(account) {
      try {
        this.selectedAccount = account
        const response = await http.get(`/api/bookmaker-accounts/${account.id}/transactions`)
        this.transactions = response.data.data.transactions || []
        this.showTransactionsModal = true
      } catch (error) {
        console.error('❌ Erro ao carregar transações:', error)
        this.showToast('Erro', 'Erro ao carregar transações', 'error')
      }
    },
    
    async addToReports(account) {
      try {
        console.log('📊 Adicionando conta aos relatórios:', account)
        
        // Verificar se a conta tem saldo suficiente
        const currentBalance = parseFloat(account.balance || 0)
        if (currentBalance <= 0) {
          this.showToast('Erro', 'Conta não possui saldo para adicionar aos relatórios', 'error')
          return
        }
        
        // Verificar se a conta está ativa
        if (account.status !== 'active') {
          this.showToast('Erro', 'Apenas contas ativas podem ser adicionadas aos relatórios', 'error')
          return
        }
        
        // Valor padrão para o relatório (pode ser configurável)
        const reportAmount = 100.00
        
        // Verificar se há saldo suficiente
        if (currentBalance < reportAmount) {
          this.showToast('Erro', `Saldo insuficiente. Necessário: ${this.formatCurrency(reportAmount)}, Disponível: ${this.formatCurrency(currentBalance)}`, 'error')
          return
        }
        
        // Confirmar ação
        if (!confirm(`Deseja adicionar ${this.formatCurrency(reportAmount)} aos relatórios?\n\nEsta ação irá:\n• Descontar ${this.formatCurrency(reportAmount)} do saldo da conta\n• Registrar uma transação de ajuste\n• Salvar o relatório para análise`)) {
          return
        }
        
        // Realizar o desconto na conta
        const response = await http.post(`/api/bookmaker-accounts/${account.id}/adjust-balance`, {
          amount: -reportAmount,
          description: `Adicionado aos relatórios - ${this.formatCurrency(reportAmount)}`,
          type: 'report_addition'
        })
        
        if (response.data.success) {
          // Salvar o relatório no localStorage
          this.saveReportToLocalStorage(account, reportAmount)
          
          // Atualizar a lista de contas
          await this.loadAccounts()
          
          this.showToast('Sucesso', `Conta adicionada aos relatórios com sucesso! Descontado: ${this.formatCurrency(reportAmount)}`, 'success')
          
          // Registrar log de auditoria
          await this.logAuditAction('ADD_TO_REPORTS', account.id, {
            account_name: account.bookmaker_name,
            amount: reportAmount,
            new_balance: response.data.data.newBalance
          })
        }
        
      } catch (error) {
        console.error('❌ Erro ao adicionar aos relatórios:', error)
        this.showToast('Erro', error.response?.data?.message || 'Erro ao adicionar aos relatórios', 'error')
      }
    },
    
    openWithdrawModal(account) {
      this.selectedAccount = account
      this.withdrawData = {
        amount: '',
        description: ''
      }
      this.showWithdrawModal = true
    },
    
    handleBalanceInput(event) {
      // Garantir que o valor seja um número válido
      const value = event.target.value
      if (value === '' || value === null || value === undefined) {
        this.formData.balance = ''
      } else {
        const numValue = parseFloat(value)
        if (!isNaN(numValue) && numValue >= 0) {
          this.formData.balance = numValue
        }
      }
    },

    handleWithdrawAmountInput(event) {
      // Permitir digitação livre, apenas validar se é um número válido
      const value = event.target.value
      
      // Permitir campo vazio
      if (value === '' || value === null || value === undefined) {
        this.withdrawData.amount = ''
        return
      }
      
      // Verificar se é um número válido
      const numValue = parseFloat(value)
      if (!isNaN(numValue) && numValue >= 0) {
        this.withdrawData.amount = value // Manter o valor original para permitir decimais
      }
      // Se não for um número válido, não fazer nada (permitir que o usuário continue digitando)
    },
    
    closeModal() {
      console.log('🔒 Fechando modal...')
      this.showAddModal = false
      this.showEditModal = false
      this.selectedAccount = null
      this.isLoading = false
      this.formData = {
        bookmaker_name: '',
        balance: '',
        currency: 'BRL',
        notes: '',
        status: 'active'
      }
      console.log('✅ Modal fechado')
      console.log('📊 Estado atual - showAddModal:', this.showAddModal, 'showEditModal:', this.showEditModal)
    },
    
    closeWithdrawModal() {
      this.showWithdrawModal = false
      this.selectedAccount = null
      this.withdrawData = {
        amount: '',
        description: ''
      }
    },
    
    closeTransactionsModal() {
      this.showTransactionsModal = false
      this.selectedAccount = null
      this.transactions = []
    },

    closeDeleteConfirmModal() {
      this.showDeleteConfirmModal = false
      this.accountToDelete = null
      this.deleteValidation = {
        canDelete: true,
        reason: '',
        warnings: []
      }
    },
    
    getStatusText(status) {
      const statusMap = {
        active: 'Ativa',
        inactive: 'Inativa',
        suspended: 'Suspensa'
      }
      return statusMap[status] || status
    },
    
    getTransactionTypeText(type) {
      const typeMap = {
        deposit: 'Depósito',
        withdrawal: 'Saque',
        adjustment: 'Ajuste'
      }
      return typeMap[type] || type
    },
    
    formatCurrency(value) {
      if (!value && value !== 0) return 'R$ 0,00'
      return new Intl.NumberFormat('pt-BR', {
        style: 'currency',
        currency: 'BRL'
      }).format(value)
    },
    
    formatDate(dateString) {
      if (!dateString) return 'Nunca'
      return new Date(dateString).toLocaleDateString('pt-BR')
    },
    
    formatDateTime(dateString) {
      if (!dateString) return 'Nunca'
      return new Date(dateString).toLocaleString('pt-BR')
    },
    
         // Validação pré-exclusão de conta
     async validateAccountForDeletion(account) {
       console.log('🔍 Validando conta para exclusão:', account)
       
       const validations = {
         canDelete: true,
         reason: '',
         warnings: []
       }
       
       // Verificar se conta possui saldo > 0 (apenas aviso, não bloqueia)
       if (parseFloat(account.balance) > 0) {
         validations.warnings.push(`💰 Saldo disponível: ${this.formatCurrency(account.balance)}`)
         // Não bloqueia a exclusão, apenas avisa
       }
       
       // Verificar se conta está ativa (apenas aviso, não bloqueia)
       if (account.status === 'active') {
         validations.warnings.push('⚠️ Conta está ativa')
       }
       
       // Verificar se há transações (apenas aviso, não bloqueia)
       try {
         const response = await http.get(`/api/bookmaker-accounts/${account.id}/transactions`)
         const transactions = response.data.data.transactions || []
         
         if (transactions.length > 0) {
           validations.warnings.push(`📊 ${transactions.length} transação(ões) encontrada(s)`)
         }
       } catch (error) {
         console.warn('⚠️ Não foi possível verificar transações:', error)
       }
       
       // TODAS as contas podem ser excluídas (apenas avisos informativos)
       validations.canDelete = true
       
       console.log('✅ Validação concluída:', validations)
       return validations
     },
    
         // Construir mensagem de confirmação de exclusão
     buildDeletionConfirmationMessage(account) {
       const balance = this.formatCurrency(account.balance)
       const status = this.getStatusText(account.status)
       
       let message = `🗑️ CONFIRMAR EXCLUSÃO DE CONTA\n\n`
       message += `📋 Nome: ${account.bookmaker_name}\n`
       message += `💰 Saldo: ${balance}\n`
       message += `📊 Status: ${status}\n`
       message += `📅 Criada em: ${this.formatDate(account.created_at)}\n\n`
       
       if (parseFloat(account.balance) > 0) {
         message += `ℹ️ INFORMAÇÃO: Esta conta possui saldo disponível.\n`
         message += `O saldo será preservado e não será perdido.\n\n`
       }
       
       message += `🔒 Esta ação irá:\n`
       message += `• Excluir permanentemente a conta\n`
       message += `• Excluir todo o histórico de transações\n`
       message += `• Perder o saldo disponível\n`
       message += `• Atualizar totalizadores\n\n`
        
        message += `Tem certeza que deseja continuar?`
        
        return message
      },
     
    // Validação para edição de conta
    validateAccountForEdit(formData, originalAccount) {
      console.log('🔍 Validando dados para edição:', formData)
      
      const errors = []
      
      // Validação do nome
      if (!formData.bookmaker_name) {
        errors.push('Casa de apostas é obrigatória')
      }
      
      if (formData.bookmaker_name && !this.availableBookmakers.includes(formData.bookmaker_name)) {
        errors.push('Casa de apostas inválida')
      }
      
      // Validação de moeda
      const validCurrencies = ['BRL', 'USD', 'EUR']
      if (!validCurrencies.includes(formData.currency)) {
        errors.push('Moeda inválida')
      }
      
      // Validação de mudança de moeda
      if (originalAccount && formData.currency !== originalAccount.currency) {
        if (parseFloat(originalAccount.balance) > 0) {
          errors.push('Não é possível alterar a moeda de uma conta com saldo')
        }
      }
      
      // Validação de status
      const validStatuses = ['active', 'inactive', 'suspended']
      if (!validStatuses.includes(formData.status)) {
        errors.push('Status inválido')
      }
      
      // Validação de mudança de status
      if (originalAccount && formData.status !== originalAccount.status) {
        if (originalAccount.status === 'inactive' && formData.status === 'active') {
          // Verificar limite de contas ativas (exemplo: máximo 5)
          const activeAccounts = this.accounts.filter(a => a.status === 'active').length
          if (activeAccounts >= 5) {
            errors.push('Limite máximo de 5 contas ativas atingido')
          }
        }
      }
      
      console.log('✅ Validação de edição concluída:', errors)
      return {
        isValid: errors.length === 0,
        errors: errors
      }
    },
       
    // Registrar log de auditoria
    async logAuditAction(action, accountId, details) {
      try {
        const auditData = {
          action: action,
          account_id: accountId,
          details: details,
          timestamp: new Date().toISOString(),
          user_id: this.currentUser?.id
        }
        
        console.log('📝 Log de auditoria:', auditData)
        
        // Aqui você pode implementar o envio para o backend
        // await http.post('/api/audit-logs', auditData)
        
      } catch (error) {
        console.warn('⚠️ Erro ao registrar log de auditoria:', error)
      }
    },
    
    // Salvar relatório no localStorage
    saveReportToLocalStorage(account, amount) {
      try {
        const storedReports = JSON.parse(localStorage.getItem('bookmaker_accounts_reports') || '[]')
        
        const newReport = {
          id: Date.now() + Math.random(),
          account_id: account.id,
          bookmaker_name: account.bookmaker_name,
          amount: amount,
          currency: account.currency,
          date: new Date().toISOString(),
          status: 'active',
          type: 'report_addition',
          description: `Conta adicionada aos relatórios - ${this.formatCurrency(amount)}`,
          balance_before: parseFloat(account.balance),
          balance_after: parseFloat(account.balance) - amount
        }
        
        storedReports.unshift(newReport)
        localStorage.setItem('bookmaker_accounts_reports', JSON.stringify(storedReports))
        
        console.log('💾 Relatório salvo no localStorage:', newReport)
        
        // Emitir evento para notificar outros componentes
        this.$emit('report-added', newReport)
        
      } catch (error) {
        console.error('❌ Erro ao salvar relatório no localStorage:', error)
        this.showToast('Erro', 'Erro ao salvar relatório local', 'error')
      }
    },
    
    // Atualizar totalizadores da dashboard
    updateDashboardTotals() {
      console.log('🔄 Atualizando totalizadores da dashboard...')
      
      // Forçar recálculo dos computed properties
      this.$forceUpdate()
      
      // Atualizar estatísticas
      const stats = {
        totalAccounts: this.accounts.length,
        activeAccounts: this.activeAccounts,
        totalBalance: this.totalBalance,
        totalTransactions: this.totalTransactions
      }
      
      console.log('📊 Novas estatísticas:', stats)
    },
       
    // Obter resumo de mudanças para auditoria
    getChangesSummary(originalAccount, newData) {
      const changes = []
      
      if (originalAccount.bookmaker_name !== newData.bookmaker_name) {
        changes.push(`Nome: "${originalAccount.bookmaker_name}" → "${newData.bookmaker_name}"`)
      }
      
      if (originalAccount.currency !== newData.currency) {
        changes.push(`Moeda: ${originalAccount.currency} → ${newData.currency}`)
      }
      
      if (originalAccount.status !== newData.status) {
        changes.push(`Status: ${this.getStatusText(originalAccount.status)} → ${this.getStatusText(newData.status)}`)
      }
      
      if (originalAccount.notes !== newData.notes) {
        changes.push('Observações alteradas')
      }
      
      return changes.length > 0 ? changes : ['Nenhuma mudança detectada']
    },

    // Sistema de Notificações Toast
    showToast(title, message, type = 'info') {
      const id = Date.now()
      const toast = {
        id,
        title,
        message,
        type,
        visible: true,
        progress: 0
      }
      
      this.toasts.push(toast)

      // Aguardar um frame para garantir que o DOM foi atualizado
      this.$nextTick(() => {
        // Forçar a animação de entrada
        const toastElement = document.querySelector(`[data-toast-id="${id}"]`)
        if (toastElement) {
          toastElement.style.transform = 'translateX(0)'
          toastElement.style.opacity = '1'
        }
      })

      this.startToastProgress(id)
    },

    startToastProgress(id) {
      const toast = this.toasts.find(t => t.id === id)
      if (!toast) return

      const duration = 3000 // 3 segundos
      const interval = 10 // 10ms interval
      const steps = duration / interval

      let currentStep = 0
      const progressInterval = setInterval(() => {
        currentStep++
        toast.progress = (currentStep / steps) * 100
        if (currentStep >= steps) {
          clearInterval(progressInterval)
          this.removeToast(id)
        }
      }, interval)
    },

    removeToast(id) {
      const toastElement = document.querySelector(`[data-toast-id="${id}"]`)
      if (toastElement) {
        // Animar a saída
        toastElement.style.transform = 'translateX(100%)'
        toastElement.style.opacity = '0'
        
        // Remover após a animação
        setTimeout(() => {
          const index = this.toasts.findIndex(t => t.id === id)
          if (index !== -1) {
            this.toasts.splice(index, 1)
          }
        }, 400)
      } else {
        // Fallback se o elemento não for encontrado
        const index = this.toasts.findIndex(t => t.id === id)
        if (index !== -1) {
          this.toasts.splice(index, 1)
        }
      }
    }
  }
}
</script>

<style scoped>
/* 
 * CORREÇÕES APLICADAS:
 * 
 * SCROLL VERTICAL:
 * 1. .accounts-container: overflow: visible e removido height: 100vh fixo
 * 2. .main-content: removido height: 100vh fixo para permitir crescimento natural
 * 3. .accounts-section: overflow: visible para permitir crescimento do conteúdo
 * 
 * LAYOUT DOS CARDS:
 * 4. Grid configurado com align-items: start para alinhar cards no topo
 * 5. Cards com altura mínima consistente (min-height: 280px)
 * 6. Layout flexbox interno para distribuir conteúdo uniformemente
 * 7. Botões de ação sempre no final do card (margin-top: auto)
 * 8. Responsividade melhorada para diferentes tamanhos de tela
 */

.accounts-container {
  display: flex;
  min-height: 100vh;
  background: var(--bg-primary);
  overflow: visible; /* Permitir scroll */
  position: relative;
  width: 100%;
  align-items: stretch;
  /* Remover height: 100vh fixo para permitir crescimento natural */
}

.main-content {
  flex: 1;
  margin-left: 0;
  transition: margin-left 0.3s ease;
  overflow-y: auto;
  overflow-x: hidden;
  width: 100%;
  max-width: 100%;
  min-height: 0;
  box-sizing: border-box;
  position: relative;
  scrollbar-width: thin;
  scrollbar-color: rgba(255, 255, 255, 0.3) transparent;
  display: flex;
  flex-direction: column;
  max-height: 100vh;
}

/* Custom scrollbar para webkit browsers */
.main-content::-webkit-scrollbar {
  width: 8px;
}

.main-content::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.1);
  border-radius: 4px;
}

.main-content::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.3);
  border-radius: 4px;
}

.main-content::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.5);
}

.content-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 24px 32px;
  border-bottom: 1px solid var(--border-primary, rgba(255, 255, 255, 0.1));
  margin-bottom: 32px;
  flex-shrink: 0;
}

.header-left {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.page-title {
  display: flex;
  align-items: center;
  gap: 16px;
  font-size: 32px;
  font-weight: 700;
  color: #00ff88;
  margin: 0;
}

.accounts-icon {
  width: 36px;
  height: 36px;
  color: #00ff88;
  filter: drop-shadow(0 0 10px rgba(0, 255, 136, 0.5));
}

.page-subtitle {
  color: var(--text-secondary, #cccccc);
  font-size: 16px;
  margin: 0;
}

.header-actions {
  display: flex;
  align-items: center;
  gap: 16px;
}

.actions-section {
  display: flex;
  justify-content: center;
  margin-bottom: 32px;
  flex-shrink: 0;
  padding: 0 32px;
}

.add-account-btn {
  background: linear-gradient(135deg, #00ff88, #00cc6a);
  border: none;
  border-radius: 8px;
  padding: 12px 24px;
  color: #1a1a1a;
  font-weight: 600;
  font-size: 14px;
  cursor: pointer;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  gap: 8px;
  white-space: nowrap;
  flex-shrink: 0;
}

.add-account-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 255, 136, 0.3);
}

.stats-section {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 20px;
  margin-bottom: 32px;
  flex-shrink: 0;
  padding: 0 32px;
}

.stat-card {
  background: rgba(42, 42, 42, 0.8);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 12px;
  padding: 24px;
  text-align: center;
  transition: transform 0.3s ease;
}

.stat-card:hover {
  transform: translateY(-4px);
}

.stat-number {
  display: block;
  font-size: 28px;
  font-weight: 700;
  color: #00ff88;
  margin-bottom: 8px;
}

.stat-label {
  color: #cccccc;
  font-size: 14px;
}

.accounts-section {
  background: rgba(42, 42, 42, 0.8);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 12px;
  padding: 24px;
  margin: 0 32px 32px;
  flex: 1;
  min-height: 0;
  overflow: visible;
}

.accounts-section h3 {
  color: #ffffff;
  margin: 0 0 24px 0;
  font-size: 20px;
  font-weight: 600;
}

.loading-indicator {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
  padding: 40px;
  color: #cccccc;
  font-size: 16px;
  min-height: 200px;
}

.loading-indicator .loading-spinner {
  font-size: 20px;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

.no-accounts {
  text-align: center;
  padding: 40px;
  color: #cccccc;
  font-size: 16px;
}

.no-accounts p {
  margin: 0;
}

.accounts-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
  gap: 20px;
  max-width: 100%;
  box-sizing: border-box;
  /* Corrigir alinhamento dos cards */
  align-items: start;
  grid-auto-rows: min-content;
}

/* Ajuste específico para quando a sidebar está expandida */
.sidebar:not(.collapsed) ~ .main-content .accounts-grid {
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); /* Reduz o tamanho mínimo quando sidebar está expandida */
}

@media (max-width: 1200px) {
  .sidebar:not(.collapsed) ~ .main-content .accounts-grid {
    grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); /* Reduz ainda mais em telas menores com sidebar expandida */
  }
}

/* Ajuste específico para quando a sidebar está colapsada - permite cards maiores */
.sidebar.collapsed ~ .main-content .accounts-grid {
  grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); /* Mantém o tamanho otimizado quando sidebar está colapsada */
}

/* Melhorar alinhamento responsivo */
@media (max-width: 768px) {
  .accounts-grid {
    grid-template-columns: 1fr; /* Uma coluna em telas pequenas */
    gap: 16px;
  }
  
  .account-card {
    min-height: auto; /* Altura automática em mobile */
  }
}

.account-card {
  background: rgba(26, 26, 26, 0.6);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 12px;
  padding: 20px;
  transition: all 0.3s ease;
  /* Corrigir alinhamento e altura dos cards */
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  min-height: 280px; /* Altura mínima consistente */
}

.account-card:hover {
  transform: translateY(-2px);
  border-color: rgba(0, 255, 136, 0.3);
}

.account-card.inactive {
  opacity: 0.6;
}

.account-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 16px;
  gap: 12px;
}

.account-info {
  flex: 1;
  min-width: 0;
}

.account-name {
  color: #ffffff;
  font-size: 18px;
  font-weight: 600;
  margin: 0 0 4px 0;
  word-break: break-word;
  overflow-wrap: break-word;
}

.account-status {
  display: inline-block;
  padding: 4px 8px;
  border-radius: 12px;
  font-size: 12px;
  font-weight: 600;
  text-transform: uppercase;
  white-space: nowrap;
  flex-shrink: 0;
}

.account-status.active {
  background: rgba(0, 255, 136, 0.2);
  color: #00ff88;
}

.account-status.inactive {
  background: rgba(255, 193, 7, 0.2);
  color: #ffc107;
}

.account-status.suspended {
  background: rgba(255, 71, 87, 0.2);
  color: #ff4757;
}

.account-actions {
  display: flex;
  gap: 8px;
  flex-shrink: 0;
}

.action-btn {
  background: none;
  border: none;
  padding: 6px;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10;
  position: relative;
  flex-shrink: 0;
  min-width: 32px;
  min-height: 32px;
}

.action-btn.edit {
  color: #ffc107;
}

.action-btn.edit:hover {
  background: rgba(255, 193, 7, 0.2);
}

.action-btn.delete {
  color: #ff4757;
}

.action-btn.delete:hover {
  background: rgba(255, 71, 87, 0.2);
}

.account-balance {
  margin-bottom: 16px;
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.balance-label {
  color: #cccccc;
  font-size: 14px;
  flex-shrink: 0;
}

 .balance-amount {
  color: #00ff88;
  font-size: 24px;
  font-weight: 700;
  word-break: break-word;
  overflow-wrap: break-word;
}

.balance-amount.has-balance {
  color: #ffc107;
  text-shadow: 0 0 10px rgba(255, 193, 7, 0.5);
}
 
 .balance-warning {
  display: block;
  color: #ffc107;
  font-size: 12px;
  font-weight: 600;
  margin-top: 4px;
  text-align: center;
  background: rgba(255, 193, 7, 0.1);
  padding: 4px 8px;
  border-radius: 4px;
  border: 1px solid rgba(255, 193, 7, 0.3);
  word-break: break-word;
  overflow-wrap: break-word;
}

.account-details {
  margin-bottom: 16px;
}

.detail-item {
  display: flex;
  justify-content: space-between;
  margin-bottom: 8px;
  flex-wrap: wrap;
  gap: 4px;
}

.detail-label {
  color: #cccccc;
  font-size: 14px;
  flex-shrink: 0;
}

.detail-value {
  color: #ffffff;
  font-size: 14px;
  font-weight: 500;
  word-break: break-word;
  overflow-wrap: break-word;
  text-align: right;
}

.account-notes {
  margin-bottom: 16px;
}

.notes-label {
  color: #cccccc;
  font-size: 14px;
  display: block;
  margin-bottom: 4px;
  flex-shrink: 0;
}

.notes-text {
  color: #ffffff;
  font-size: 14px;
  margin: 0;
  line-height: 1.4;
  word-break: break-word;
  overflow-wrap: break-word;
}

.account-transactions {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
  margin-top: auto; /* Empurrar para o final do card */
}

/* Ajustar layout dos botões para 3 botões */
.account-transactions .transactions-btn,
.account-transactions .withdraw-btn,
.account-transactions .add-reports-btn {
  flex: 1;
  min-width: 0;
  font-size: 12px;
  padding: 8px 12px;
}

.transactions-btn,
.withdraw-btn,
.add-reports-btn {
  flex: 1;
  padding: 10px 16px;
  border: none;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  min-width: 0;
  white-space: nowrap;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
}

.transactions-btn {
  background: rgba(255, 255, 255, 0.1);
  color: #ffffff;
}

.transactions-btn:hover {
  background: rgba(255, 255, 255, 0.2);
}

.withdraw-btn {
  background: linear-gradient(135deg, #ff6b35, #f7931e);
  color: #ffffff;
}

.withdraw-btn:hover:not(:disabled) {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(255, 107, 53, 0.3);
}

.withdraw-btn:disabled,
.add-reports-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.add-reports-btn {
  background: linear-gradient(135deg, #007bff, #0056b3);
  color: #ffffff;
}

.add-reports-btn:hover:not(:disabled) {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(0, 123, 255, 0.3);
}

.add-reports-btn svg {
  width: 14px;
  height: 14px;
  flex-shrink: 0;
}

/* Modal Styles */
.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.8);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9999;
  padding: 20px;
  backdrop-filter: blur(4px);
}

.modal-content {
  background: var(--bg-primary);
  border-radius: 12px;
  padding: 0;
  max-width: 500px;
  width: 100%;
  max-height: 90vh;
  overflow-y: auto;
  border: 1px solid rgba(255, 255, 255, 0.1);
  scrollbar-width: thin;
  scrollbar-color: rgba(255, 255, 255, 0.3) transparent;
}

.modal-content::-webkit-scrollbar {
  width: 6px;
}

.modal-content::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.1);
  border-radius: 3px;
}

.modal-content::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.3);
  border-radius: 3px;
}

.modal-content::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.5);
}

.modal-content.large {
  max-width: 800px;
}

.modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 24px 24px 0 24px;
  margin-bottom: 24px;
  gap: 16px;
}

.modal-header h3 {
  color: #ffffff;
  margin: 0;
  font-size: 20px;
  font-weight: 600;
  flex: 1;
  min-width: 0;
  word-break: break-word;
  overflow-wrap: break-word;
}

.close-btn {
  background: none;
  border: none;
  color: #cccccc;
  font-size: 24px;
  cursor: pointer;
  padding: 0;
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  transition: all 0.3s ease;
  flex-shrink: 0;
}

.close-btn:hover {
  background: rgba(255, 255, 255, 0.1);
  color: #ffffff;
}

.modal-form {
  padding: 0 24px 24px 24px;
}

.form-group {
  margin-bottom: 20px;
}

.form-group label {
  display: block;
  color: #ffffff;
  font-weight: 600;
  margin-bottom: 8px;
  font-size: 14px;
}

.form-group input,
.form-group select,
.form-group textarea {
  width: 100%;
  padding: 12px 16px;
  background: rgba(42, 42, 42, 0.8);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 8px;
  color: #ffffff;
  font-size: 14px;
  transition: border-color 0.3s ease;
}

.form-group input:focus,
.form-group select:focus,
.form-group textarea:focus {
  outline: none;
  border-color: #00ff88;
}

.form-help {
  display: block;
  color: #cccccc;
  font-size: 12px;
  margin-top: 4px;
}

.modal-actions {
  display: flex;
  gap: 12px;
  justify-content: flex-end;
  margin-top: 24px;
  flex-wrap: wrap;
}

.cancel-btn,
.save-btn,
.withdraw-submit-btn {
  padding: 12px 24px;
  border: none;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  min-width: 0;
  white-space: nowrap;
}

.cancel-btn {
  background: rgba(255, 255, 255, 0.1);
  color: #ffffff;
}

.cancel-btn:hover {
  background: rgba(255, 255, 255, 0.2);
}

.save-btn {
  background: linear-gradient(135deg, #00ff88, #00cc6a);
  color: #1a1a1a;
}

.save-btn:hover:not(:disabled) {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(0, 255, 136, 0.3);
}

.withdraw-submit-btn {
  background: linear-gradient(135deg, #ff6b35, #f7931e);
  color: #ffffff;
}

.withdraw-submit-btn:hover:not(:disabled) {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(255, 107, 53, 0.3);
}

.save-btn:disabled,
.withdraw-submit-btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
  transform: none;
}

.loading-spinner {
  margin-left: 8px;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

/* Transactions Modal */
.transactions-content {
  padding: 0 24px 24px 24px;
}

.no-transactions {
  text-align: center;
  padding: 40px;
  color: #cccccc;
}

.transactions-list {
  max-height: 400px;
  overflow-y: auto;
  scrollbar-width: thin;
  scrollbar-color: rgba(255, 255, 255, 0.3) transparent;
}

.transactions-list::-webkit-scrollbar {
  width: 6px;
}

.transactions-list::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.1);
  border-radius: 3px;
}

.transactions-list::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.3);
  border-radius: 3px;
}

.transactions-list::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.5);
}

.transaction-item {
  background: rgba(26, 26, 26, 0.6);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 8px;
  padding: 16px;
  margin-bottom: 12px;
}

.transaction-item.deposit {
  border-left: 4px solid #00ff88;
}

.transaction-item.withdrawal {
  border-left: 4px solid #ff4757;
}

.transaction-item.adjustment {
  border-left: 4px solid #ffc107;
}

.transaction-info {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 12px;
}

.transaction-type {
  display: flex;
  align-items: center;
}

.type-badge {
  padding: 4px 8px;
  border-radius: 12px;
  font-size: 12px;
  font-weight: 600;
  text-transform: uppercase;
}

.type-badge.deposit {
  background: rgba(0, 255, 136, 0.2);
  color: #00ff88;
}

.type-badge.withdrawal {
  background: rgba(255, 71, 87, 0.2);
  color: #ff4757;
}

.type-badge.adjustment {
  background: rgba(255, 193, 7, 0.2);
  color: #ffc107;
}

.transaction-amount {
  text-align: right;
}

.amount {
  font-size: 18px;
  font-weight: 700;
}

.amount.deposit {
  color: #00ff88;
}

.amount.withdrawal {
  color: #ff4757;
}

.amount.adjustment {
  color: #ffc107;
}

.transaction-details {
  font-size: 14px;
}

.transaction-description {
  color: #ffffff;
  margin-bottom: 4px;
}

.transaction-date {
  color: #cccccc;
  margin-bottom: 4px;
}

 .transaction-balance {
   color: #cccccc;
   font-size: 12px;
 }

 /* Modal de Confirmação de Exclusão */
 .modal-content.delete-confirm {
   max-width: 600px;
   background: linear-gradient(135deg, rgba(42, 42, 42, 0.95), rgba(26, 26, 26, 0.95));
   border: 1px solid rgba(255, 71, 87, 0.3);
   box-shadow: 0 8px 32px rgba(255, 71, 87, 0.2);
 }

 .delete-header {
  background: linear-gradient(135deg, rgba(255, 71, 87, 0.1), rgba(255, 71, 87, 0.05));
  border-bottom: 1px solid rgba(255, 71, 87, 0.2);
  padding: 24px 24px 20px 24px;
  margin-bottom: 0;
  display: flex;
  align-items: center;
  gap: 16px;
}

.delete-icon {
  color: #ff4757;
  filter: drop-shadow(0 0 8px rgba(255, 71, 87, 0.5));
  flex-shrink: 0;
}

.delete-header h3 {
  color: #ff4757;
  margin: 0;
  flex: 1;
  min-width: 0;
  word-break: break-word;
  overflow-wrap: break-word;
}

 .delete-content {
   padding: 24px;
 }

 .account-summary {
   background: rgba(255, 255, 255, 0.05);
   border: 1px solid rgba(255, 255, 255, 0.1);
   border-radius: 8px;
   padding: 20px;
   margin-bottom: 24px;
 }

 .account-info-row {
   display: flex;
   justify-content: space-between;
   align-items: center;
   margin-bottom: 12px;
   padding: 8px 0;
   border-bottom: 1px solid rgba(255, 255, 255, 0.05);
 }

 .account-info-row:last-child {
   margin-bottom: 0;
   border-bottom: none;
 }

 .info-label {
  color: #cccccc;
  font-size: 14px;
  font-weight: 500;
  flex-shrink: 0;
}

 .info-value {
  color: #ffffff;
  font-size: 14px;
  font-weight: 600;
  word-break: break-word;
  overflow-wrap: break-word;
  text-align: right;
}

 .balance-value {
  color: #ffc107;
  text-shadow: 0 0 8px rgba(255, 193, 7, 0.3);
  word-break: break-word;
  overflow-wrap: break-word;
}

 .status-value {
  padding: 4px 8px;
  border-radius: 12px;
  font-size: 12px;
  font-weight: 600;
  text-transform: uppercase;
  white-space: nowrap;
  flex-shrink: 0;
}

 .status-value.active {
   background: rgba(0, 255, 136, 0.2);
   color: #00ff88;
 }

 .status-value.inactive {
   background: rgba(255, 193, 7, 0.2);
   color: #ffc107;
 }

 .status-value.suspended {
   background: rgba(255, 71, 87, 0.2);
   color: #ff4757;
 }

 .delete-warnings {
   background: rgba(255, 193, 7, 0.1);
   border: 1px solid rgba(255, 193, 7, 0.3);
   border-radius: 8px;
   padding: 20px;
   margin-bottom: 24px;
 }

 .delete-warnings h4 {
   color: #ffc107;
   margin: 0 0 16px 0;
   font-size: 16px;
   font-weight: 600;
   display: flex;
   align-items: center;
   gap: 8px;
 }

 .warnings-list {
   margin: 0;
   padding-left: 20px;
 }

 .warning-item {
   color: #ffc107;
   font-size: 14px;
   margin-bottom: 8px;
   line-height: 1.4;
 }

 .warning-item:last-child {
   margin-bottom: 0;
 }

 .delete-consequences {
   background: rgba(255, 71, 87, 0.1);
   border: 1px solid rgba(255, 71, 87, 0.3);
   border-radius: 8px;
   padding: 20px;
   margin-bottom: 24px;
 }

 .delete-consequences h4 {
   color: #ff4757;
   margin: 0 0 16px 0;
   font-size: 16px;
   font-weight: 600;
   display: flex;
   align-items: center;
   gap: 8px;
 }

 .consequences-list {
   margin: 0;
   padding-left: 20px;
 }

 .consequences-list li {
   color: #ffffff;
   font-size: 14px;
   margin-bottom: 8px;
   line-height: 1.4;
 }

 .consequences-list li:last-child {
   margin-bottom: 0;
 }

 .delete-actions {
   display: flex;
   gap: 16px;
   justify-content: flex-end;
   margin-top: 24px;
 }

 .cancel-delete-btn,
.confirm-delete-btn {
  padding: 12px 24px;
  border: none;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  gap: 8px;
  min-width: 0;
  white-space: nowrap;
}

 .cancel-delete-btn {
   background: rgba(255, 255, 255, 0.1);
   color: #ffffff;
   border: 1px solid rgba(255, 255, 255, 0.2);
 }

 .cancel-delete-btn:hover {
   background: rgba(255, 255, 255, 0.2);
   transform: translateY(-1px);
 }

 .confirm-delete-btn {
   background: linear-gradient(135deg, #ff4757, #ff6b7a);
   color: #ffffff;
   border: 1px solid rgba(255, 71, 87, 0.3);
   box-shadow: 0 4px 12px rgba(255, 71, 87, 0.3);
 }

 .confirm-delete-btn:hover:not(:disabled) {
   background: linear-gradient(135deg, #ff6b7a, #ff4757);
   transform: translateY(-1px);
   box-shadow: 0 6px 16px rgba(255, 71, 87, 0.4);
 }

 .confirm-delete-btn:disabled {
   opacity: 0.6;
   cursor: not-allowed;
   transform: none;
 }

/* Sistema de Notificações Toast */
.toast-container {
  position: fixed;
  top: 20px;
  right: 20px;
  z-index: 10000;
  display: flex;
  flex-direction: column;
  gap: 10px;
  pointer-events: none;
}

.toast-notification {
  pointer-events: auto;
}

 .toast-notification {
   background: linear-gradient(135deg, rgba(42, 42, 42, 0.95), rgba(26, 26, 26, 0.95));
   backdrop-filter: blur(10px);
   color: #ffffff;
   border: 1px solid rgba(255, 255, 255, 0.1);
   border-radius: 12px;
   padding: 16px 20px;
   box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
   display: flex;
   align-items: center;
   gap: 12px;
   opacity: 0;
   transform: translateX(100%);
   transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
   width: 320px;
   box-sizing: border-box;
   position: relative;
   overflow: hidden;
   margin-bottom: 8px;
 }

 .toast-notification[style*="translateX(0)"] {
   opacity: 1;
   transform: translateX(0);
 }

 .toast-notification.success {
   border-left: 4px solid #00ff88;
   box-shadow: 0 8px 32px rgba(0, 255, 136, 0.2);
 }

 .toast-notification.success .toast-icon {
   color: #00ff88;
 }

 .toast-notification.error {
   border-left: 4px solid #ff4757;
   box-shadow: 0 8px 32px rgba(255, 71, 87, 0.2);
 }

 .toast-notification.error .toast-icon {
   color: #ff4757;
 }

 .toast-notification.warning {
   border-left: 4px solid #ffc107;
   box-shadow: 0 8px 32px rgba(255, 193, 7, 0.2);
 }

 .toast-notification.warning .toast-icon {
   color: #ffc107;
 }

 .toast-notification.info {
   border-left: 4px solid #007bff;
   box-shadow: 0 8px 32px rgba(0, 123, 255, 0.2);
 }

 .toast-notification.info .toast-icon {
   color: #007bff;
 }

.toast-icon {
  flex-shrink: 0;
}

.toast-content {
  flex-grow: 1;
}

.toast-title {
  font-weight: 600;
  margin-bottom: 4px;
  color: #ffffff;
}

.toast-message {
  font-size: 14px;
  color: #cccccc;
  line-height: 1.4;
}

.toast-close {
  background: none;
  border: none;
  color: #cccccc;
  cursor: pointer;
  padding: 0;
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  transition: all 0.3s ease;
  flex-shrink: 0;
}

.toast-close:hover {
  background: rgba(255, 255, 255, 0.1);
  color: #ffffff;
}

 .toast-progress {
   position: absolute;
   bottom: 0;
   left: 0;
   height: 3px;
   background: linear-gradient(90deg, rgba(255, 255, 255, 0.3), rgba(255, 255, 255, 0.1));
   border-radius: 0 0 12px 12px;
   transition: width 0.1s linear;
   box-shadow: 0 0 10px rgba(255, 255, 255, 0.2);
 }

 .toast-notification.success .toast-progress {
   background: linear-gradient(90deg, #00ff88, rgba(0, 255, 136, 0.3));
 }

 .toast-notification.error .toast-progress {
   background: linear-gradient(90deg, #ff4757, rgba(255, 71, 87, 0.3));
 }

 .toast-notification.warning .toast-progress {
   background: linear-gradient(90deg, #ffc107, rgba(255, 193, 7, 0.3));
 }

 .toast-notification.info .toast-progress {
   background: linear-gradient(90deg, #007bff, rgba(0, 123, 255, 0.3));
 }

   /* Responsividade */
  @media (max-width: 1200px) {
    .accounts-grid {
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    }
    
    .stats-section {
      grid-template-columns: repeat(2, 1fr);
    }
  }

   @media (max-width: 768px) {
    .content-header { 
      flex-direction: column; 
      align-items: flex-start; 
      gap: 16px; 
      padding: 16px 20px; 
    }
    
    .actions-section {
      padding: 0 20px;
    }
    
    .stats-section {
      padding: 0 20px;
    }
    
    .accounts-section {
      margin: 0 20px 20px;
    }
    
    .accounts-grid {
      grid-template-columns: 1fr;
      gap: 16px;
    }
    
    .stats-section {
      grid-template-columns: repeat(2, 1fr);
    }
   
   .modal-content {
     margin: 10px;
   }
   
   .account-transactions {
     flex-direction: column;
     gap: 8px;
   }
   
   .account-transactions .transactions-btn,
   .account-transactions .withdraw-btn,
   .account-transactions .add-reports-btn {
     width: 100%;
     justify-content: center;
   }

   /* Toast notifications responsivas */
   .toast-container {
     top: 10px;
     right: 10px;
     left: 10px;
   }

   .toast-notification {
     width: 100%;
     max-width: none;
   }

   /* Modal de confirmação responsivo */
   .modal-content.delete-confirm {
     margin: 10px;
     max-width: none;
   }

   .delete-actions {
     flex-direction: column;
     gap: 12px;
   }

   .cancel-delete-btn,
   .confirm-delete-btn {
     width: 100%;
     justify-content: center;
   }

   .account-info-row {
     flex-direction: column;
     align-items: flex-start;
     gap: 4px;
   }

   .info-value {
     margin-left: 16px;
   }
   
   /* Ajustes para telas muito pequenas */
   .page-title {
     font-size: 24px;
     flex-direction: column;
     gap: 8px;
   }
   
   .page-subtitle {
     font-size: 14px;
   }
   
   .accounts-icon {
     width: 28px;
     height: 28px;
   }
   
   .stat-card {
     padding: 16px;
   }
   
   .stat-number {
     font-size: 24px;
   }
 }

@media (max-width: 480px) {
  .page-title {
    font-size: 20px;
  }
  
  .page-subtitle {
    font-size: 13px;
  }
}
</style>
